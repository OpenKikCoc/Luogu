# [尼克的任务](https://www.luogu.com.cn/problem/P1280) 

## 题意

>   ## 题目描述
>
>   尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。
>
>   尼克的一个工作日为 n*n* 分钟，从第 11 分钟开始到第 n*n* 分钟结束。当尼克到达单位后他就开始干活，公司一共有 k*k* 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 p*p* 分钟开始，持续时间为 t*t* 分钟，则该任务将在第 (p+t−1)(*p*+*t*−1) 分钟结束。
>
>   写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。
>
>   ## 输入格式
>
>   输入数据第一行含两个用空格隔开的整数 n*n* 和 k*k*。
>
>   接下来共有 k*k* 行，每一行有两个用空格隔开的整数 p*p* 和 t*t*，表示该任务从第 p*p* 分钟开始，持续时间为 t*t* 分钟。
>
>   ## 输出格式
>
>   输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。
>
>   ## 输入输出样例
>
>   **输入 #1**复制
>
>   ```
>   15 6
>   1 2
>   1 6
>   4 11
>   8 5
>   8 1
>   11 5
>   ```
>
>   **输出 #1**复制
>
>   ```
>   4
>   ```
>
>   ## 说明/提示
>
>   #### 数据规模与约定
>
>   -   对于 100%100% 的数据，保证 1≤n≤104,1≤k≤104,1≤p≤n,1≤p+t−1≤n1≤*n*≤104,1≤*k*≤104,1≤*p*≤*n*,1≤*p*+*t*−1≤*n*。

## 题解



```c++
#include <bits/stdc++.h>
using namespace std;

const int N = 1e4 + 10;

int n, k;
struct Ks {
    int k, l;
} ks[N];
int s[N], f[N];

int main() {
    cin >> n >> k;
    
    for (int i = 0; i < k; ++ i ) {
        cin >> ks[i].k >> ks[i].l;
        s[ks[i].k] ++ ;    // ATTENTION
    }
    
    // ATTENTION
    sort(ks, ks + k, [](const Ks & a, const Ks & b) {
        return a.k > b.k;
    });
    
    int p = 0;  // 任务从晚到早遍历
    for (int i = n; i > 0; -- i ) {
        if (s[i] == 0)
            f[i] = f[i + 1] + 1;
        else
            // 找出选择哪一个本时刻的任务使空闲时间最大化
            for (int j = 0; j < s[i]; ++ j) {
                if (f[i + ks[p].l] > f[i])
                    f[i] = f[i + ks[p].l];
                p ++ ;
            }
    }

    cout << f[1] << endl;
    
    return 0;
}
```



```python3

```

